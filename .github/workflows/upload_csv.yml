name: Upload CSV para Azure

on:
  push:
    paths:
      - 'data/**.csv' 

jobs:
  enviar-arquivo:
    runs-on: ubuntu-latest
    steps:

    - name: Checkout do c√≥digo
      uses: actions/checkout@v3

    - name: Upload para o Blob Storage
      uses: azure/CLI@v1
      with:
        inlineScript: |
          cd data
          az storage blob upload-batch \
            --account-name projetostorage \
            --destination dadosbrutos \
            --source . \
            --connection-string "DefaultEndpointsProtocol=https;AccountName=projetostorage;AccountKey=BBPPrbrLKwWBY0fIz1/ZC1wqT5rnk+XdDLQnP+6CPl8WoV3qkv2io1cgRlBBD69XOlWNF+Ee9jza+AStLxJ+AQ==;EndpointSuffix=core.windows.net" \
            --pattern "*.csv"